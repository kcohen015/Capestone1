<body>
    <app-sidebar></app-sidebar>
    <div style="display: flex;  flex-direction: column; width: 100%;">
        <app-inline-navbar style="width: 100%;"></app-inline-navbar>
        <main style="width: 100%; height: 100%;">

            <div class="card shadow-lg outer-card" style="width: 80%;">
                <div class="container">

                    <div class="row card">
                        <div class="col title">
                            <div class="card-header titleOfGoal" style="font-size: 24px; padding: 10px">{{goal.title}}
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <div class="card" style="margin-top: 20px; height: 90%;">
                                <h5 class="card-header" style="font-size: 20px; padding: 10px; margin-bottom: 10px;">
                                    Prediction Calculator:
                                </h5>
                                <div class="card-body" style="font-size: 12pt; text-align: center">
                                    <!-- <p class="predict">At the rate of {{depositAmount}} per month you will reach your
                                        goal of
                                        {{goal.amount}} in {{getMonths()}}.</p>
                                    <p class="predict">Expected Completion Date: </p>
                                    <p class="predict">{{getExpectedDate()}}</p> -->
                                    <br>
                                    <div class="predict"> At this deposit value of </div>
                                    <div style="font-size:14pt; font-weight:bold">${{depositAmount}} per
                                        month, </div>
                                    <div>you will
                                        reach your goal in</div>
                                    <div style="font-size:14pt; font-weight:bold">
                                        {{(goal.amount-goal.fund)/depositAmount}} months</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="card">
                                <h5 class="card-header" style="font-size: 20px; padding: 10px; margin-bottom: 10px;">
                                    Goal
                                    Description:
                                </h5>
                                <div class="card-body">
                                    <p class="card-text" style="font-size: 12pt;">{{goal.description}}</p>

                                    <div class="CRUDbuttons">
                                        <div style="font-size: 10pt; align-self:flex-end"> Goal:
                                            {{goal.amount}}</div>
                                        <div class="button-span">
                                            <span class="update">
                                                <button (click)="goToUpdate(goal.id)"
                                                    class="btn btn-primary">Update</button>
                                            </span>
                                            <span class="delete">
                                                <a (click)="deleteGoal(goal.id)" class="btn btn-primary">Delete</a>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <h5 class="card-header"
                                    style="font-size: 20px; padding: 10px; margin-bottom: 10px; max-height: 50px;">
                                    Measure
                                    your Progress: </h5>
                                <div class="row  progress-card">
                                    <div class="col">
                                        <div class="progress " style="height: 20px;">
                                            <div class="progress-bar" id="progress-bar" role="progressbar">{{update()}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col">

                            <div class="card d-card">
                                <div class="col deposit">
                                    <h5 class="card-header"
                                        style="margin-bottom: 10px; font-size: 12pt; text-align: left;">
                                        Make a Deposit: </h5>
                                    <div class="deposit-inner">
                                        <input type="text" name="depositAmount" id="depositAmount" placeholder="$0.00"
                                            [(ngModel)]="depositAmount">
                                        <div style="display: flex; justify-content:space-between; align-items:flex-end">
                                            <div class="current-balance" style="font-size: 10pt; text-align: left;">
                                                <span>Current Balance: </span>
                                                <span>${{goal.fund}} / ${{goal.amount}}</span>

                                            </div>
                                            <div class="depositBtn">
                                                <a (click)="addFund(depositAmount)"
                                                    class="btn btn-primary btn-d">Deposit</a>

                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>
                            <div class="card w-card">
                                <div class="col withdrawl">
                                    <h5 class="card-header"
                                        style="margin-bottom: 10px; font-size: 12pt; text-align: left;">
                                        Make a Withdrawl: </h5>
                                    <div class="deposit-inner">
                                        <input type="text" name="withdrawlAmount" id="withdrawlAmount"
                                            placeholder="$0.00" [(ngModel)]="withdrawalAmount">
                                        <div class="btnW">
                                            <div class="depositBtn"
                                                *ngIf="withdrawalAmount > goal.fund; else elseBlock">

                                            </div>
                                        </div>
                                        <div>
                                            <ng-template #elseBlock>
                                                <button (click)="withdrawFund(withdrawalAmount)"
                                                    class="btn btn-primary btn-w" id="disabled">Withdrawl</button>
                                            </ng-template>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>


                    </div>

                </div>


            </div>
            <script src="../goal-details/countdown.js">
            </script>
            <script src="../../Funds.js">
            </script>
        </main>
    </div>
</body>